<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fc_tasks: FC_Interface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fc_tasks
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classFC__Interface-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FC_Interface Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a93061c8193ef5965dab84dee7713db3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a93061c8193ef5965dab84dee7713db3d">FC_Interface</a> (std::string group_name, ros::NodeHandle &amp;nh_)</td></tr>
<tr class="memdesc:a93061c8193ef5965dab84dee7713db3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classFC__Interface.html">FC_Interface</a> class.  <a href="classFC__Interface.html#a93061c8193ef5965dab84dee7713db3d">More...</a><br /></td></tr>
<tr class="separator:a93061c8193ef5965dab84dee7713db3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d2863ddbafff5e665df4d5d6a9259f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#ad6d2863ddbafff5e665df4d5d6a9259f">getPose</a> (fc_msgs::GetPose::Request &amp;req, fc_msgs::GetPose::Response &amp;res)</td></tr>
<tr class="memdesc:ad6d2863ddbafff5e665df4d5d6a9259f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_get_pose' ROS service.  <a href="classFC__Interface.html#ad6d2863ddbafff5e665df4d5d6a9259f">More...</a><br /></td></tr>
<tr class="separator:ad6d2863ddbafff5e665df4d5d6a9259f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ba1c6a58a67b145a7489c91b50224d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#af7ba1c6a58a67b145a7489c91b50224d">setPose</a> (fc_msgs::SetPose::Request &amp;req, fc_msgs::SetPose::Response &amp;res)</td></tr>
<tr class="memdesc:af7ba1c6a58a67b145a7489c91b50224d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_set_pose' ROS service.  <a href="classFC__Interface.html#af7ba1c6a58a67b145a7489c91b50224d">More...</a><br /></td></tr>
<tr class="separator:af7ba1c6a58a67b145a7489c91b50224d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aad6d309b2387f0467fdb809e6d9650"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a9aad6d309b2387f0467fdb809e6d9650">setJoints</a> (fc_msgs::SetJoints::Request &amp;req, fc_msgs::SetJoints::Response &amp;res)</td></tr>
<tr class="memdesc:a9aad6d309b2387f0467fdb809e6d9650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_set_joints' ROS service.  <a href="classFC__Interface.html#a9aad6d309b2387f0467fdb809e6d9650">More...</a><br /></td></tr>
<tr class="separator:a9aad6d309b2387f0467fdb809e6d9650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fd1d178f395826f7ab7e8f9c1cc6383"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a4fd1d178f395826f7ab7e8f9c1cc6383">executeTrajectory</a> (moveit_msgs::ExecuteKnownTrajectory::Request &amp;req, moveit_msgs::ExecuteKnownTrajectory::Response &amp;res)</td></tr>
<tr class="memdesc:a4fd1d178f395826f7ab7e8f9c1cc6383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_execute_trajectory' ROS service.  <a href="classFC__Interface.html#a4fd1d178f395826f7ab7e8f9c1cc6383">More...</a><br /></td></tr>
<tr class="separator:a4fd1d178f395826f7ab7e8f9c1cc6383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca700d220402724738cb804d10dedaad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#aca700d220402724738cb804d10dedaad">stopTrajectory</a> (std_srvs::Trigger::Request &amp;req, std_srvs::Trigger::Response &amp;res)</td></tr>
<tr class="memdesc:aca700d220402724738cb804d10dedaad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_stop_trajectory' ROS service.  <a href="classFC__Interface.html#aca700d220402724738cb804d10dedaad">More...</a><br /></td></tr>
<tr class="separator:aca700d220402724738cb804d10dedaad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e73fa2e4481c51ab8cf50db8ed237fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a7e73fa2e4481c51ab8cf50db8ed237fd">executeCartesianTrajectory</a> (fc_msgs::ExecuteCartesianTrajectory::Request &amp;req, fc_msgs::ExecuteCartesianTrajectory::Response &amp;res)</td></tr>
<tr class="memdesc:a7e73fa2e4481c51ab8cf50db8ed237fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_execute_cartesian_trajectory' ROS service.  <a href="classFC__Interface.html#a7e73fa2e4481c51ab8cf50db8ed237fd">More...</a><br /></td></tr>
<tr class="separator:a7e73fa2e4481c51ab8cf50db8ed237fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c270fa4f58f0d52d28882c100ff311"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a98c270fa4f58f0d52d28882c100ff311">executeCartesianTrajectoryAsync</a> (fc_msgs::ExecuteCartesianTrajectory::Request &amp;req, fc_msgs::ExecuteCartesianTrajectory::Response &amp;res)</td></tr>
<tr class="memdesc:a98c270fa4f58f0d52d28882c100ff311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_execute_cartesian_trajectory_async' ROS service.  <a href="classFC__Interface.html#a98c270fa4f58f0d52d28882c100ff311">More...</a><br /></td></tr>
<tr class="separator:a98c270fa4f58f0d52d28882c100ff311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa9f5796cbf86cd29d14829405cb354e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#aaa9f5796cbf86cd29d14829405cb354e">goToJointsCallback</a> (const fc_msgs::GoToJointsGoalConstPtr &amp;goal)</td></tr>
<tr class="memdesc:aaa9f5796cbf86cd29d14829405cb354e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_go_to_joints' action server.  <a href="classFC__Interface.html#aaa9f5796cbf86cd29d14829405cb354e">More...</a><br /></td></tr>
<tr class="separator:aaa9f5796cbf86cd29d14829405cb354e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53a7b9e850c889f27b77e68d0e37d13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#ad53a7b9e850c889f27b77e68d0e37d13">goToPoseCallback</a> (const fc_msgs::GoToPoseGoalConstPtr &amp;goal)</td></tr>
<tr class="memdesc:ad53a7b9e850c889f27b77e68d0e37d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_go_to_pose' action server.  <a href="classFC__Interface.html#ad53a7b9e850c889f27b77e68d0e37d13">More...</a><br /></td></tr>
<tr class="separator:ad53a7b9e850c889f27b77e68d0e37d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b7f56258f537e276dc270fcb53eed28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a8b7f56258f537e276dc270fcb53eed28">goToPoseAsyncCallback</a> (const fc_msgs::GoToPoseGoalConstPtr &amp;goal)</td></tr>
<tr class="memdesc:a8b7f56258f537e276dc270fcb53eed28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_go_to_pose_async' action server.  <a href="classFC__Interface.html#a8b7f56258f537e276dc270fcb53eed28">More...</a><br /></td></tr>
<tr class="separator:a8b7f56258f537e276dc270fcb53eed28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a035a7428ac1b6adf37e2e3e8fe189"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#ac0a035a7428ac1b6adf37e2e3e8fe189">executeCartesianTrajectoryCallback</a> (const fc_msgs::ExecuteCartesianTrajectoryGoalConstPtr &amp;goal)</td></tr>
<tr class="memdesc:ac0a035a7428ac1b6adf37e2e3e8fe189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the 'fc_execute_cartesian_trajectory' action server.  <a href="classFC__Interface.html#ac0a035a7428ac1b6adf37e2e3e8fe189">More...</a><br /></td></tr>
<tr class="separator:ac0a035a7428ac1b6adf37e2e3e8fe189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ef243f0c04054e36d6ef15116e97f82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#a3ef243f0c04054e36d6ef15116e97f82">jointStatesCallback</a> (const sensor_msgs::JointState::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a3ef243f0c04054e36d6ef15116e97f82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for the '/joint_states' topic.  <a href="classFC__Interface.html#a3ef243f0c04054e36d6ef15116e97f82">More...</a><br /></td></tr>
<tr class="separator:a3ef243f0c04054e36d6ef15116e97f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa814ee4c80d05e418d07c61274dd5dcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFC__Interface.html#aa814ee4c80d05e418d07c61274dd5dcc">checkMoving</a> (const sensor_msgs::JointState::ConstPtr &amp;msg)</td></tr>
<tr class="separator:aa814ee4c80d05e418d07c61274dd5dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129b0cc0856c897596d5ecbfcbece5cd"><td class="memItemLeft" align="right" valign="top"><a id="a129b0cc0856c897596d5ecbfcbece5cd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>checkTrajStatus</b> (const actionlib_msgs::GoalStatusArray::ConstPtr &amp;msg)</td></tr>
<tr class="separator:a129b0cc0856c897596d5ecbfcbece5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="fc__interface_8h_source.html#l00051">51</a> of file <a class="el" href="fc__interface_8h_source.html">fc_interface.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a93061c8193ef5965dab84dee7713db3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93061c8193ef5965dab84dee7713db3d">&#9670;&nbsp;</a></span>FC_Interface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FC_Interface::FC_Interface </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>group_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ros::NodeHandle &amp;&#160;</td>
          <td class="paramname"><em>nh_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classFC__Interface.html">FC_Interface</a> class. </p>
<p>Initializes the MoveIt! MoveGroup interface and sets up all relevant ROS interfaces including action servers, service servers, and topic subscribers for controlling a robotic manipulator.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group_name</td><td>Name of the MoveIt! planning group to be used. </td></tr>
    <tr><td class="paramname">hn_</td><td>Reference to the ROS node handle for setting up communication.</td></tr>
  </table>
  </dd>
</dl>
<p>The constructor performs the following:</p><ul>
<li>Initializes MoveGroup with the given planning group.</li>
<li>Sets up action servers for pose, joint, and Cartesian trajectory goals.</li>
<li>Sets default velocity and acceleration scaling factors.</li>
<li>Starts action servers.</li>
<li>Subscribes to joint state and trajectory status topics for feedback monitoring.</li>
<li>Advertises multiple ROS service servers for motion control.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The MoveGroupInterface's planning frame, pose reference frame, and end-effector link are logged for debugging purposes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00004">4</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    : move_group_(group_name), </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    go_to_pose_as_(nh_, <span class="stringliteral">&quot;fc_go_to_pose&quot;</span>, boost::bind(&amp;<a class="code" href="classFC__Interface.html#ad53a7b9e850c889f27b77e68d0e37d13">FC_Interface::goToPoseCallback</a>, <span class="keyword">this</span>, _1), <span class="keyword">false</span>), </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    go_to_pose_async_as_(nh_, <span class="stringliteral">&quot;fc_go_to_pose_async&quot;</span>, boost::bind(&amp;<a class="code" href="classFC__Interface.html#a8b7f56258f537e276dc270fcb53eed28">FC_Interface::goToPoseAsyncCallback</a>, <span class="keyword">this</span>, _1), <span class="keyword">false</span>), </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    go_to_joints_as_(nh_, <span class="stringliteral">&quot;fc_go_to_joints&quot;</span>, boost::bind(&amp;<a class="code" href="classFC__Interface.html#aaa9f5796cbf86cd29d14829405cb354e">FC_Interface::goToJointsCallback</a>, <span class="keyword">this</span>, _1), <span class="keyword">false</span>),</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    execute_cartesian_trajectory_as_(nh_, <span class="stringliteral">&quot;fc_execute_cartesian_trajectory_action&quot;</span>, boost::bind(&amp;<a class="code" href="classFC__Interface.html#ac0a035a7428ac1b6adf37e2e3e8fe189">FC_Interface::executeCartesianTrajectoryCallback</a>, <span class="keyword">this</span>, _1), <span class="keyword">false</span>)</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    ROS_INFO_STREAM(<span class="stringliteral">&quot;Planning frame..&quot;</span> &lt;&lt; move_group_.getPlanningFrame());</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    ROS_INFO_STREAM(<span class="stringliteral">&quot;Pose reference frame..&quot;</span> &lt;&lt; move_group_.getPoseReferenceFrame());</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    ROS_INFO_STREAM(<span class="stringliteral">&quot;End Effector..&quot;</span> &lt;&lt; move_group_.getEndEffector());</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    ROS_INFO_STREAM(<span class="stringliteral">&quot;End Effector Link..&quot;</span> &lt;&lt; move_group_.getEndEffectorLink());</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    max_velocity_scaling_factor_ = 0.1;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    max_acceleration_scaling_factor_ = 0.1;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    move_group_.setMaxAccelerationScalingFactor(max_acceleration_scaling_factor_);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    move_group_.setMaxVelocityScalingFactor(max_velocity_scaling_factor_);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">//READ CONFIG FILES (TODO: change to include everything)</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    std::string current_dir = ros::package::getPath(<span class="stringliteral">&quot;fc_tasks&quot;</span>); </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    std::string robot_config_file = current_dir + <span class="stringliteral">&quot;/config/lr200iD7L.json&quot;</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    robot_DH_ = loadFromFile_(robot_config_file, <span class="stringliteral">&quot;DH&quot;</span>); </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    robot_base_frame_ = loadFromFile_(robot_config_file, <span class="stringliteral">&quot;base&quot;</span>); </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">//START ACTION SERVERS</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    go_to_pose_as_.start();</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    go_to_pose_async_as_.start();</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    go_to_joints_as_.start();</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    execute_cartesian_trajectory_as_.start();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">//ROSTOPIC SUBSCRIBERS</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    check_moving_sub_ = nh_.subscribe(<span class="stringliteral">&quot;check_moving&quot;</span>, 1, &amp;<a class="code" href="classFC__Interface.html#aa814ee4c80d05e418d07c61274dd5dcc">FC_Interface::checkMoving</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    trajectory_status_sub_ = nh_.subscribe(<span class="stringliteral">&quot;execute_trajectory/status&quot;</span>, 1, &amp;FC_Interface::checkTrajStatus, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    joint_states_sub_ = nh_.subscribe(<span class="stringliteral">&quot;joint_states&quot;</span>, 1, &amp;<a class="code" href="classFC__Interface.html#a3ef243f0c04054e36d6ef15116e97f82">FC_Interface::jointStatesCallback</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">//ROSTOPIC PUBLISHERS </span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    tool0_pose_pub_ = nh_.advertise&lt;geometry_msgs::PoseStamped&gt;(<span class="stringliteral">&quot;tool0_pose&quot;</span>, 1);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">//SERVICE SERVERS</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    getPose_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_get_pose&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#ad6d2863ddbafff5e665df4d5d6a9259f">FC_Interface::getPose</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    setJoints_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_set_joints&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#a9aad6d309b2387f0467fdb809e6d9650">FC_Interface::setJoints</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    setPose_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_set_pose&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#af7ba1c6a58a67b145a7489c91b50224d">FC_Interface::setPose</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    executeTrajectory_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_execute_trajectory&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#a4fd1d178f395826f7ab7e8f9c1cc6383">FC_Interface::executeTrajectory</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    stopTrajectory_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_stop_trajectory&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#aca700d220402724738cb804d10dedaad">FC_Interface::stopTrajectory</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    executeCartesianTraj_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_execute_cartesian_trajectory&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#a7e73fa2e4481c51ab8cf50db8ed237fd">FC_Interface::executeCartesianTrajectory</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    executeCartesianTrajAsync_server_ = nh_.advertiseService(<span class="stringliteral">&quot;fc_execute_cartesian_trajectory_async&quot;</span>, &amp;<a class="code" href="classFC__Interface.html#a7e73fa2e4481c51ab8cf50db8ed237fd">FC_Interface::executeCartesianTrajectory</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="ttc" id="aclassFC__Interface_html_a3ef243f0c04054e36d6ef15116e97f82"><div class="ttname"><a href="classFC__Interface.html#a3ef243f0c04054e36d6ef15116e97f82">FC_Interface::jointStatesCallback</a></div><div class="ttdeci">void jointStatesCallback(const sensor_msgs::JointState::ConstPtr &amp;msg)</div><div class="ttdoc">Callback function for the '/joint_states' topic.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00356">fc_interface.cpp:356</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_a4fd1d178f395826f7ab7e8f9c1cc6383"><div class="ttname"><a href="classFC__Interface.html#a4fd1d178f395826f7ab7e8f9c1cc6383">FC_Interface::executeTrajectory</a></div><div class="ttdeci">bool executeTrajectory(moveit_msgs::ExecuteKnownTrajectory::Request &amp;req, moveit_msgs::ExecuteKnownTrajectory::Response &amp;res)</div><div class="ttdoc">Callback function for the 'fc_execute_trajectory' ROS service.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00116">fc_interface.cpp:116</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_a7e73fa2e4481c51ab8cf50db8ed237fd"><div class="ttname"><a href="classFC__Interface.html#a7e73fa2e4481c51ab8cf50db8ed237fd">FC_Interface::executeCartesianTrajectory</a></div><div class="ttdeci">bool executeCartesianTrajectory(fc_msgs::ExecuteCartesianTrajectory::Request &amp;req, fc_msgs::ExecuteCartesianTrajectory::Response &amp;res)</div><div class="ttdoc">Callback function for the 'fc_execute_cartesian_trajectory' ROS service.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00150">fc_interface.cpp:150</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_a8b7f56258f537e276dc270fcb53eed28"><div class="ttname"><a href="classFC__Interface.html#a8b7f56258f537e276dc270fcb53eed28">FC_Interface::goToPoseAsyncCallback</a></div><div class="ttdeci">void goToPoseAsyncCallback(const fc_msgs::GoToPoseGoalConstPtr &amp;goal)</div><div class="ttdoc">Callback function for the 'fc_go_to_pose_async' action server.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00262">fc_interface.cpp:262</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_a9aad6d309b2387f0467fdb809e6d9650"><div class="ttname"><a href="classFC__Interface.html#a9aad6d309b2387f0467fdb809e6d9650">FC_Interface::setJoints</a></div><div class="ttdeci">bool setJoints(fc_msgs::SetJoints::Request &amp;req, fc_msgs::SetJoints::Response &amp;res)</div><div class="ttdoc">Callback function for the 'fc_set_joints' ROS service.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00080">fc_interface.cpp:80</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_aa814ee4c80d05e418d07c61274dd5dcc"><div class="ttname"><a href="classFC__Interface.html#aa814ee4c80d05e418d07c61274dd5dcc">FC_Interface::checkMoving</a></div><div class="ttdeci">void checkMoving(const sensor_msgs::JointState::ConstPtr &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00335">fc_interface.cpp:335</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_aaa9f5796cbf86cd29d14829405cb354e"><div class="ttname"><a href="classFC__Interface.html#aaa9f5796cbf86cd29d14829405cb354e">FC_Interface::goToJointsCallback</a></div><div class="ttdeci">void goToJointsCallback(const fc_msgs::GoToJointsGoalConstPtr &amp;goal)</div><div class="ttdoc">Callback function for the 'fc_go_to_joints' action server.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00188">fc_interface.cpp:188</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_ac0a035a7428ac1b6adf37e2e3e8fe189"><div class="ttname"><a href="classFC__Interface.html#ac0a035a7428ac1b6adf37e2e3e8fe189">FC_Interface::executeCartesianTrajectoryCallback</a></div><div class="ttdeci">void executeCartesianTrajectoryCallback(const fc_msgs::ExecuteCartesianTrajectoryGoalConstPtr &amp;goal)</div><div class="ttdoc">Callback function for the 'fc_execute_cartesian_trajectory' action server.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00287">fc_interface.cpp:287</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_aca700d220402724738cb804d10dedaad"><div class="ttname"><a href="classFC__Interface.html#aca700d220402724738cb804d10dedaad">FC_Interface::stopTrajectory</a></div><div class="ttdeci">bool stopTrajectory(std_srvs::Trigger::Request &amp;req, std_srvs::Trigger::Response &amp;res)</div><div class="ttdoc">Callback function for the 'fc_stop_trajectory' ROS service.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00138">fc_interface.cpp:138</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_ad53a7b9e850c889f27b77e68d0e37d13"><div class="ttname"><a href="classFC__Interface.html#ad53a7b9e850c889f27b77e68d0e37d13">FC_Interface::goToPoseCallback</a></div><div class="ttdeci">void goToPoseCallback(const fc_msgs::GoToPoseGoalConstPtr &amp;goal)</div><div class="ttdoc">Callback function for the 'fc_go_to_pose' action server.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00237">fc_interface.cpp:237</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_ad6d2863ddbafff5e665df4d5d6a9259f"><div class="ttname"><a href="classFC__Interface.html#ad6d2863ddbafff5e665df4d5d6a9259f">FC_Interface::getPose</a></div><div class="ttdeci">bool getPose(fc_msgs::GetPose::Request &amp;req, fc_msgs::GetPose::Response &amp;res)</div><div class="ttdoc">Callback function for the 'fc_get_pose' ROS service.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00051">fc_interface.cpp:51</a></div></div>
<div class="ttc" id="aclassFC__Interface_html_af7ba1c6a58a67b145a7489c91b50224d"><div class="ttname"><a href="classFC__Interface.html#af7ba1c6a58a67b145a7489c91b50224d">FC_Interface::setPose</a></div><div class="ttdeci">bool setPose(fc_msgs::SetPose::Request &amp;req, fc_msgs::SetPose::Response &amp;res)</div><div class="ttdoc">Callback function for the 'fc_set_pose' ROS service.</div><div class="ttdef"><b>Definition:</b> <a href="fc__interface_8cpp_source.html#l00062">fc_interface.cpp:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa814ee4c80d05e418d07c61274dd5dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa814ee4c80d05e418d07c61274dd5dcc">&#9670;&nbsp;</a></span>checkMoving()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FC_Interface::checkMoving </td>
          <td>(</td>
          <td class="paramtype">const sensor_msgs::JointState::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper Functions </p>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00335">335</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                                                      {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">int</span> size = msg-&gt;velocity.size();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">double</span> velocity_sum = 0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;size; i++){</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        velocity_sum += abs(msg-&gt;velocity[i]);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (velocity_sum &gt; 0.05){</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        is_moving_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        is_moving_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e73fa2e4481c51ab8cf50db8ed237fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e73fa2e4481c51ab8cf50db8ed237fd">&#9670;&nbsp;</a></span>executeCartesianTrajectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::executeCartesianTrajectory </td>
          <td>(</td>
          <td class="paramtype">fc_msgs::ExecuteCartesianTrajectory::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fc_msgs::ExecuteCartesianTrajectory::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_execute_cartesian_trajectory' ROS service. </p>
<p>Executes a Cartesian path through a series of waypoints using MoveIt!'s planning interface. The path is interpolated based on the specified end-effector step size and jump threshold.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Service request containing:<ul>
<li>req.poses: Sequence of geometry_msgs::Pose waypoints to follow.</li>
<li>req.eef_step: Resolution of interpolation in meters along the Cartesian path.</li>
<li>req.jump_threshold: Jump detection threshold for joint space discontinuities.</li>
<li>req.max_velocity_scaling_factor: Optional scaling factor for velocity (range 0.0–1.0).</li>
<li>req.max_acceleration_scaling_factor: Optional scaling factor for acceleration (range 0.0–1.0).</li>
<li>req.blend_radius: Optional radius for blending waypoints (if supported).</li>
</ul>
</td></tr>
    <tr><td class="paramname">res</td><td>Service response containing:<ul>
<li>res.pose: The final end-effector pose after executing the Cartesian trajectory.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the Cartesian path was successfully planned and executed; false otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If planning fails due to unreachable waypoints or joint limits, the function returns false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00150">150</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                                                                                                                          {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    ROS_DEBUG_STREAM( <span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    ROS_DEBUG_STREAM( <span class="stringliteral">&quot;Number of waypoints: &quot;</span> &lt;&lt; req.poses.size());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">bool</span> success = planAndExecuteCartesianPath_(req.poses, req.eef_step, req.jump_threshold, </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                req.max_velocity_scaling_factor, req.max_acceleration_scaling_factor,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                                req.blend_radius, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    res.pose = move_group_.getCurrentPose().pose;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    ROS_DEBUG_STREAM(res.pose);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> success; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a98c270fa4f58f0d52d28882c100ff311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98c270fa4f58f0d52d28882c100ff311">&#9670;&nbsp;</a></span>executeCartesianTrajectoryAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::executeCartesianTrajectoryAsync </td>
          <td>(</td>
          <td class="paramtype">fc_msgs::ExecuteCartesianTrajectory::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fc_msgs::ExecuteCartesianTrajectory::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_execute_cartesian_trajectory_async' ROS service. </p>
<p>Executes a Cartesian path asynchronously through a series of end-effector waypoints using MoveIt!. This is similar to <code>executeCartesianTrajectory</code>, but it does <b>not block</b> until the full trajectory is complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Service request containing:<ul>
<li>req.poses: A sequence of Cartesian waypoints (geometry_msgs::Pose) to follow.</li>
<li>req.eef_step: Interpolation resolution in meters along the Cartesian path.</li>
<li>req.jump_threshold: Threshold for detecting large joint-space jumps.</li>
<li>req.max_velocity_scaling_factor: Optional scaling factor for motion velocity (range 0.0–1.0).</li>
<li>req.max_acceleration_scaling_factor: Optional scaling factor for motion acceleration (range 0.0–1.0).</li>
<li>req.blend_radius: Radius for blending between waypoints (if supported).</li>
</ul>
</td></tr>
    <tr><td class="paramname">res</td><td>Service response containing:<ul>
<li>res.pose: The actual end-effector pose after initiating trajectory execution.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the Cartesian trajectory was successfully planned and execution was started; false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00169">169</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                                                                                                                               {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    ROS_DEBUG_STREAM( <span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    ROS_DEBUG_STREAM( <span class="stringliteral">&quot;Number of waypoints: &quot;</span> &lt;&lt; req.poses.size());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">bool</span> success = planAndExecuteCartesianPath_(req.poses, req.eef_step, req.jump_threshold, </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                                req.max_velocity_scaling_factor, req.max_acceleration_scaling_factor,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                req.blend_radius, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    res.pose = move_group_.getCurrentPose().pose;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    ROS_DEBUG_STREAM(res.pose);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> success; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0a035a7428ac1b6adf37e2e3e8fe189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a035a7428ac1b6adf37e2e3e8fe189">&#9670;&nbsp;</a></span>executeCartesianTrajectoryCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FC_Interface::executeCartesianTrajectoryCallback </td>
          <td>(</td>
          <td class="paramtype">const fc_msgs::ExecuteCartesianTrajectoryGoalConstPtr &amp;&#160;</td>
          <td class="paramname"><em>goal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_execute_cartesian_trajectory' action server. </p>
<p>This action executes a Cartesian trajectory defined by a sequence of waypoints. It provides real-time feedback on the progress of waypoint tracking, including percentage completion and currently reached waypoint ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">goal</td><td>A shared pointer to the action goal containing:<ul>
<li>goal-&gt;waypoints: A list of geometry_msgs::Pose targets for the end-effector to follow.</li>
<li>goal-&gt;eef_step: Resolution of interpolation in meters between waypoints.</li>
<li>goal-&gt;jump_threshold: Threshold for joint-space discontinuity detection.</li>
<li>goal-&gt;max_velocity_scaling_factor: Optional velocity scaling factor (range: 0.0–1.0).</li>
<li>goal-&gt;max_acceleration_scaling_factor: Optional acceleration scaling factor (range: 0.0–1.0).</li>
<li>goal-&gt;blend_radius: Radius to apply for smoothing transitions between waypoints (if supported).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Internally uses <code>planAndExecuteCartesianPath_()</code> with <code>async=true</code>.</li>
<li>Publishes <code>feedback</code> including:<ul>
<li><code>feedback</code>: A string status message.</li>
<li><code>wp_id</code>: Index of the last reached waypoint.</li>
<li><code>wp_pct</code>: Percentage of waypoints reached.</li>
</ul>
</li>
<li>Uses <code>calculatePoseError_()</code> to determine when the robot has reached the next waypoint.</li>
<li>Automatically handles preemption requests and aborts gracefully if preempted or ROS is shutting down.</li>
</ul>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None. The result is returned via the action server using <code>setSucceeded()</code> or <code>setPreempted()</code>. </dd></dl>
<p>TODO: create config file for all magic numbers</p>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00287">287</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                                                                                               {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;New Trajectory to End Waypoint: &quot;</span> &lt;&lt; goal-&gt;waypoints[1]);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Number of waypoints: &quot;</span> &lt;&lt; goal-&gt;waypoints.size());</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    execute_cartesian_trajectory_feedback_.feedback = <span class="stringliteral">&quot;Planning Cartesian Trajectory&quot;</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    execute_cartesian_trajectory_feedback_.wp_pct = 0.0;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    execute_cartesian_trajectory_feedback_.wp_id = 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    execute_cartesian_trajectory_as_.publishFeedback(execute_cartesian_trajectory_feedback_);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    planAndExecuteCartesianPath_(goal-&gt;waypoints, goal-&gt;eef_step, goal-&gt;jump_threshold, </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                goal-&gt;max_velocity_scaling_factor, goal-&gt;max_acceleration_scaling_factor,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                goal-&gt;blend_radius, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">//******************************************************************</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">while</span>(execute_cartesian_trajectory_feedback_.wp_id &lt; goal-&gt;waypoints.size()-1)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span>(execute_cartesian_trajectory_as_.isPreemptRequested() || !ros::ok())</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            execute_cartesian_trajectory_feedback_.feedback = <span class="stringliteral">&quot;Preempted&quot;</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            execute_cartesian_trajectory_as_.publishFeedback(execute_cartesian_trajectory_feedback_);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            execute_cartesian_trajectory_as_.setPreempted(execute_cartesian_trajectory_result_);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordtype">int</span> next_wp_id = execute_cartesian_trajectory_feedback_.wp_id + 1;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        geometry_msgs::Pose next_wp = goal-&gt;waypoints[next_wp_id];</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordtype">double</span> position_error, orientation_error;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        calculatePoseError_(move_group_.getCurrentPose().pose, next_wp, position_error, orientation_error);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordtype">float</span> pos_tolerance = 0.001;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordtype">float</span> orient_tolerance = 0.01;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (position_error &lt; pos_tolerance || orientation_error &lt; orient_tolerance)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            execute_cartesian_trajectory_feedback_.feedback = <span class="stringliteral">&quot;Waypoint reached: &quot;</span> + std::to_string(next_wp_id);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            execute_cartesian_trajectory_feedback_.wp_id = next_wp_id;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        execute_cartesian_trajectory_feedback_.wp_pct = </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            (float)execute_cartesian_trajectory_feedback_.wp_id/(<span class="keywordtype">float</span>)goal-&gt;waypoints.size();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        execute_cartesian_trajectory_as_.publishFeedback(execute_cartesian_trajectory_feedback_);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fd1d178f395826f7ab7e8f9c1cc6383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd1d178f395826f7ab7e8f9c1cc6383">&#9670;&nbsp;</a></span>executeTrajectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::executeTrajectory </td>
          <td>(</td>
          <td class="paramtype">moveit_msgs::ExecuteKnownTrajectory::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">moveit_msgs::ExecuteKnownTrajectory::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_execute_trajectory' ROS service. </p>
<p>Executes a precomputed trajectory provided in the request using MoveIt!'s MoveGroup interface. This is useful for executing trajectories planned and returned earlier by a planner.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Service request containing:<ul>
<li>req.trajectory: A full robot trajectory (moveit_msgs::RobotTrajectory) to execute.</li>
</ul>
</td></tr>
    <tr><td class="paramname">res</td><td>Service response containing:<ul>
<li>res.error_code: The result of the execution (moveit_msgs::MoveItErrorCodes).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the request was handled (even if execution failed); false if the service itself failed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The following steps are performed:<ul>
<li>Stops any ongoing execution with <code>move_group_.stop()</code>.</li>
<li>Loads the provided trajectory into a Plan object.</li>
<li>Executes the trajectory using <code>move_group_.execute()</code>.</li>
<li>The error code is returned in the response regardless of success or failure.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function returns <code>true</code> even if execution fails, to indicate the service completed. You must check <code>res.error_code</code> to determine if the trajectory was successfully executed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00116">116</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                                                                                                 {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    move_group_.stop();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    moveit::planning_interface::MoveGroupInterface::Plan plan;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    plan.trajectory_ = req.trajectory;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    moveit_msgs::MoveItErrorCodes ret_val = move_group_.execute(plan);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    res.error_code = ret_val;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (ret_val.val != moveit_msgs::MoveItErrorCodes::SUCCESS)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Move failed due to ERROR CODE=&quot;</span> &lt;&lt; res.error_code);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6d2863ddbafff5e665df4d5d6a9259f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d2863ddbafff5e665df4d5d6a9259f">&#9670;&nbsp;</a></span>getPose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::getPose </td>
          <td>(</td>
          <td class="paramtype">fc_msgs::GetPose::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fc_msgs::GetPose::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_get_pose' ROS service. </p>
<p>This service retrieves the current end-effector pose of the manipulator in the MoveIt! planning scene. It responds with the pose expressed in the reference frame used by the MoveGroup interface.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Request message (unused; included for compatibility with service definition). </td></tr>
    <tr><td class="paramname">res</td><td>Response message that contains the current pose (geometry_msgs::Pose) of the manipulator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the pose was successfully retrieved and assigned to the response.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>An AsyncSpinner is used here to ensure proper ROS callback handling during blocking operations. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00051">51</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    res.pose = move_group_.getCurrentPose().pose;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa9f5796cbf86cd29d14829405cb354e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa9f5796cbf86cd29d14829405cb354e">&#9670;&nbsp;</a></span>goToJointsCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FC_Interface::goToJointsCallback </td>
          <td>(</td>
          <td class="paramtype">const fc_msgs::GoToJointsGoalConstPtr &amp;&#160;</td>
          <td class="paramname"><em>goal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_go_to_joints' action server. </p>
<p>This action moves the manipulator to a target joint configuration provided in the goal message. It uses MoveIt!'s MoveGroup interface to plan and execute the motion using the BiTRRT planner. Feedback is published during execution, and the final joint state is returned in the result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">goal</td><td>A shared pointer to the action goal containing:<ul>
<li>goal-&gt;state: Target joint configuration (sensor_msgs::JointState).</li>
<li>goal-&gt;max_velocity_scaling_factor: Scaling factor for motion velocity (0.0 to 1.0).</li>
<li>goal-&gt;max_acceleration_scaling_factor: Scaling factor for motion acceleration (0.0 to 1.0).</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. The result is sent back using the action server handle:<ul>
<li>If the move succeeds, <code>setSucceeded()</code> is called.</li>
<li>If the move fails, <code>setAborted()</code> is called with appropriate feedback.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If motion continuously times out or fails, the action is aborted with a failure result. </dd>
<dd>
No upper bound is placed on retry attempts (could be improved for fault tolerance). </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00188">188</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                                                              {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;New Move to: &quot;</span> &lt;&lt; goal-&gt;state);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    move_group_.setPlannerId(<span class="stringliteral">&quot;BiTRRT&quot;</span>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Printing Planner Params&quot;</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    move_group_.setMaxAccelerationScalingFactor(goal-&gt;max_acceleration_scaling_factor);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    move_group_.setMaxVelocityScalingFactor(goal-&gt;max_velocity_scaling_factor);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    go_to_joints_feedback_.feedback = <span class="stringliteral">&quot;Printing Planner Params&quot;</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    go_to_joints_as_.publishFeedback(go_to_joints_feedback_);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    move_group_.setJointValueTarget(goal-&gt;state);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Target Joints set&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    go_to_joints_feedback_.feedback = <span class="stringliteral">&quot;Target Joints set&quot;</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    go_to_joints_as_.publishFeedback(go_to_joints_feedback_);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    moveit_msgs::MoveItErrorCodes ret_val = move_group_.move();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Return Value&quot;</span>&lt;&lt;ret_val);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">while</span> (ret_val.val == moveit_msgs::MoveItErrorCodes::TIMED_OUT)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        ret_val = move_group_.move();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    last_joints_.name = move_group_.getJoints();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    last_joints_.position = move_group_.getCurrentJointValues();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    go_to_joints_result_.state = last_joints_;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (ret_val.val != moveit_msgs::MoveItErrorCodes::SUCCESS)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Move failed due to ERROR CODE=&quot;</span> &lt;&lt; ret_val);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        go_to_joints_feedback_.feedback = <span class="stringliteral">&quot;Move failed&quot;</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        go_to_joints_as_.publishFeedback(go_to_joints_feedback_);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        go_to_joints_as_.setAborted(go_to_joints_result_);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    go_to_joints_as_.setSucceeded(go_to_joints_result_);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b7f56258f537e276dc270fcb53eed28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b7f56258f537e276dc270fcb53eed28">&#9670;&nbsp;</a></span>goToPoseAsyncCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FC_Interface::goToPoseAsyncCallback </td>
          <td>(</td>
          <td class="paramtype">const fc_msgs::GoToPoseGoalConstPtr &amp;&#160;</td>
          <td class="paramname"><em>goal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_go_to_pose_async' action server. </p>
<p>This action moves the robot's end-effector to a specified pose using MoveIt! in <b>asynchronous</b> (non-blocking) mode. The target pose is provided in the goal, along with optional velocity and acceleration scaling factors, and a selectable trajectory type (e.g., joint-space or Cartesian).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">goal</td><td>A shared pointer to the action goal containing:<ul>
<li>goal-&gt;pose: The target end-effector pose (geometry_msgs::Pose).</li>
<li>goal-&gt;max_velocity_scaling_factor: Scaling factor for velocity (range: 0.0–1.0).</li>
<li>goal-&gt;max_acceleration_scaling_factor: Scaling factor for acceleration (range: 0.0–1.0).</li>
<li>goal-&gt;traj_type: Integer or enum indicating the desired trajectory type.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. The result is communicated using <code>setSucceeded()</code> or <code>setAborted()</code> via the action server handle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00262">262</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                                               {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;New Move to: &quot;</span> &lt;&lt; goal-&gt;pose);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">bool</span> success = planAndExecutePose_(goal-&gt;pose, goal-&gt;max_velocity_scaling_factor, goal-&gt;max_acceleration_scaling_factor, goal-&gt;traj_type, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (!success)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        go_to_pose_feedback_.feedback = <span class="stringliteral">&quot;Move failed&quot;</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        go_to_pose_as_.publishFeedback(go_to_pose_feedback_);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        go_to_pose_as_.setAborted(go_to_pose_result_);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    go_to_pose_result_.pose = move_group_.getCurrentPose().pose;    </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    ROS_DEBUG_STREAM(go_to_pose_result_.pose);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    go_to_pose_as_.setSucceeded(go_to_pose_result_);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad53a7b9e850c889f27b77e68d0e37d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad53a7b9e850c889f27b77e68d0e37d13">&#9670;&nbsp;</a></span>goToPoseCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FC_Interface::goToPoseCallback </td>
          <td>(</td>
          <td class="paramtype">const fc_msgs::GoToPoseGoalConstPtr &amp;&#160;</td>
          <td class="paramname"><em>goal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_go_to_pose' action server. </p>
<p>This action moves the robot's end-effector to a specified pose using MoveIt!. The pose execution can be configured with velocity and acceleration scaling factors, and a selectable trajectory type (e.g., joint-space or Cartesian).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">goal</td><td>A shared pointer to the action goal containing:<ul>
<li>goal-&gt;pose: The target end-effector pose (geometry_msgs::Pose).</li>
<li>goal-&gt;max_velocity_scaling_factor: Scaling factor for velocity (range: 0.0–1.0).</li>
<li>goal-&gt;max_acceleration_scaling_factor: Scaling factor for acceleration (range: 0.0–1.0).</li>
<li>goal-&gt;traj_type: Integer or enum indicating the desired trajectory type.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. The result is communicated via <code>setSucceeded()</code> or <code>setAborted()</code> on the action server. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00237">237</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                                          {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;New Move to: &quot;</span> &lt;&lt; goal-&gt;pose);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">bool</span> success = planAndExecutePose_(goal-&gt;pose, goal-&gt;max_velocity_scaling_factor, goal-&gt;max_acceleration_scaling_factor, goal-&gt;traj_type, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (!success)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        go_to_pose_feedback_.feedback = <span class="stringliteral">&quot;Move failed&quot;</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        go_to_pose_as_.publishFeedback(go_to_pose_feedback_);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        go_to_pose_as_.setAborted(go_to_pose_result_);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    go_to_pose_result_.pose = move_group_.getCurrentPose().pose;    </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    ROS_DEBUG_STREAM(go_to_pose_result_.pose);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    go_to_pose_as_.setSucceeded(go_to_pose_result_);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ef243f0c04054e36d6ef15116e97f82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ef243f0c04054e36d6ef15116e97f82">&#9670;&nbsp;</a></span>jointStatesCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FC_Interface::jointStatesCallback </td>
          <td>(</td>
          <td class="paramtype">const sensor_msgs::JointState::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the '/joint_states' topic. </p>
<p>This function processes incoming joint state messages, computes the corresponding end-effector pose using forward kinematics, and publishes the result as a <code>geometry_msgs::PoseStamped</code> message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A shared pointer to the incoming sensor_msgs::JointState message containing joint positions.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Converts the joint positions into an Eigen vector <code>q</code>.</li>
<li>Calls <code>_FK()</code> to compute the transformation matrix from the base frame to the tool0 (end-effector).</li>
<li>Extracts the translation and rotation (as quaternion) from the 4x4 pose matrix.</li>
<li>Publishes the computed pose on <code>tool0_pose_pub_</code> as a <code>PoseStamped</code> message.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The base frame is assumed to be <code>"base"</code> (set as <code>frame_id</code>).</li>
<li>Orientation is extracted from the 3x3 rotation block of the transformation matrix.</li>
<li><code>_FK()</code> is expected to implement the forward kinematics logic using the provided DH parameters. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00356">356</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                                                              {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// READ JOINT STATES</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    VectorJd q(msg-&gt;position.size());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;msg-&gt;position.size(); i++)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        q(i) = msg-&gt;position[i];</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// COMPUTE FORWARD KINEMATICS</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    Eigen::Matrix4d tool0_pose = _FK(q, robot_DH_, robot_base_frame_, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// PUBLISH TOOL0 POSE</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    geometry_msgs::PoseStamped tool0_pose_msg;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    tool0_pose_msg.header.stamp = ros::Time::now();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    tool0_pose_msg.header.frame_id = <span class="stringliteral">&quot;base&quot;</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    tool0_pose_msg.pose.position.x = tool0_pose(0, 3);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    tool0_pose_msg.pose.position.y = tool0_pose(1, 3);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    tool0_pose_msg.pose.position.z = tool0_pose(2, 3);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    Eigen::Quaterniond q_(tool0_pose.block&lt;3, 3&gt;(0, 0));</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    tool0_pose_msg.pose.orientation.x = q_.x();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    tool0_pose_msg.pose.orientation.y = q_.y();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    tool0_pose_msg.pose.orientation.z = q_.z();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    tool0_pose_msg.pose.orientation.w = q_.w();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    tool0_pose_pub_.publish(tool0_pose_msg);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9aad6d309b2387f0467fdb809e6d9650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aad6d309b2387f0467fdb809e6d9650">&#9670;&nbsp;</a></span>setJoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::setJoints </td>
          <td>(</td>
          <td class="paramtype">fc_msgs::SetJoints::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fc_msgs::SetJoints::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_set_joints' ROS service. </p>
<p>This service sets a target joint configuration for the manipulator and attempts to move to it using the specified planner (in this case, BiTRRT). It also includes retry logic in case the motion times out.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Service request containing:<ul>
<li>req.state: The desired joint positions (sensor_msgs::JointState).</li>
</ul>
</td></tr>
    <tr><td class="paramname">res</td><td>Service response containing:<ul>
<li>res.state: The actual joint positions after motion execution.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the motion was successfully planned and executed, false otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The planner used is explicitly set to "BiTRRT". The motion is retried up to <code>max_retries</code> times if the initial execution times out. The joint names and current joint values are stored in <code>last_joints_</code> for future reference. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00080">80</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                                                                       {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;New Move to: &quot;</span> &lt;&lt; req.state);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    move_group_.setPlannerId(<span class="stringliteral">&quot;BiTRRT&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    move_group_.setJointValueTarget(req.state);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Target Joints set&quot;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    moveit_msgs::MoveItErrorCodes ret_val = move_group_.move();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Return Value&quot;</span> &lt;&lt; ret_val);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    try_count_ = 0; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">while</span> (ret_val.val == moveit_msgs::MoveItErrorCodes::TIMED_OUT &amp;&amp; try_count_ &lt; max_retries_){</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        try_count_++;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        ret_val = move_group_.move(); </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    last_joints_.name = move_group_.getJoints();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    last_joints_.position = move_group_.getCurrentJointValues();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    res.state = last_joints_;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (ret_val.val != moveit_msgs::MoveItErrorCodes::SUCCESS)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        ROS_ERROR_STREAM(<span class="stringliteral">&quot;Move failed due to ERROR CODE=&quot;</span> &lt;&lt; ret_val);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    ROS_DEBUG_STREAM( <span class="stringliteral">&quot;Move succeeded.&quot;</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af7ba1c6a58a67b145a7489c91b50224d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7ba1c6a58a67b145a7489c91b50224d">&#9670;&nbsp;</a></span>setPose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::setPose </td>
          <td>(</td>
          <td class="paramtype">fc_msgs::SetPose::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fc_msgs::SetPose::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_set_pose' ROS service. </p>
<p>This service receives a target end-effector pose and attempts to move the robot to that pose using MoveIt!. The pose can be executed with optional velocity and acceleration scaling, and a specified trajectory type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Service request containing:<ul>
<li>req.pose: Target pose to move the end-effector to (geometry_msgs::Pose).</li>
<li>OPTIONAL req.max_velocity_scaling_factor: Optional scaling for velocity (range: 0.0–1.0).</li>
<li>OPTIONAL req.max_acceleration_scaling_factor: Optional scaling for acceleration (range: 0.0–1.0).</li>
<li>OPTIONAL req.traj_type: Type of trajectory to execute (e.g., Cartesian or joint-space).</li>
</ul>
</td></tr>
    <tr><td class="paramname">res</td><td>Service response containing:<ul>
<li>res.pose: Actual end-effector pose after execution.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the motion was successfully planned and executed, false otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function uses an AsyncSpinner to ensure ROS callbacks remain active during blocking operations. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00062">62</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;Let&#39;s Move!!&quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    ROS_DEBUG_STREAM(<span class="stringliteral">&quot;New Move to: &quot;</span> &lt;&lt; req.pose);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">bool</span> success = planAndExecutePose_(req.pose, req.max_velocity_scaling_factor, req.max_acceleration_scaling_factor, req.traj_type);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    res.pose = move_group_.getCurrentPose().pose;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    ROS_DEBUG_STREAM(res.pose);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aca700d220402724738cb804d10dedaad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca700d220402724738cb804d10dedaad">&#9670;&nbsp;</a></span>stopTrajectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FC_Interface::stopTrajectory </td>
          <td>(</td>
          <td class="paramtype">std_srvs::Trigger::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std_srvs::Trigger::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for the 'fc_stop_trajectory' ROS service. </p>
<p>This service stops any currently executing trajectory using MoveIt!'s MoveGroup interface. It is useful for emergency stops or manual interruption of motion execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Empty standard Trigger service request. </td></tr>
    <tr><td class="paramname">res</td><td>Standard Trigger service response containing:<ul>
<li>res.success: Always set to true if <code>move_group_.stop()</code> was called.</li>
<li>res.message: Informative string indicating the trajectory was stopped.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true indicating the service call was processed successfully.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Uses an AsyncSpinner to ensure the ROS callback queue remains active during execution. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fc__interface_8cpp_source.html#l00138">138</a> of file <a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    ros::AsyncSpinner async_spinner(1);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    async_spinner.start();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    move_group_.stop();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    res.success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    res.message = <span class="stringliteral">&quot;Trajectory stopped&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    async_spinner.stop();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="fc__interface_8h_source.html">fc_interface.h</a></li>
<li>src/<a class="el" href="fc__interface_8cpp_source.html">fc_interface.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
